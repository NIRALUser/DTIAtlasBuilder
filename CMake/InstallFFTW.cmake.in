
set(ENV{CC} "@CMAKE_C_COMPILER@ @CMAKE_C_COMPILER_ARG1@")
set(ENV{CFLAGS} "@CMAKE_C_FLAGS@ @CMAKE_C_FLAGS_RELEASE@")
set(ENV{CXX} "@CMAKE_CXX_COMPILER@ @CMAKE_CXX_COMPILER_ARG1@")
set(ENV{CXXFLAGS} "@CMAKE_CXX_FLAGS@ @CMAKE_CXX_FLAGS_RELEASE@")
set(ENV{LDFLAGS} "@CMAKE_LINKER_FLAGS@ @CMAKE_LINKER_FLAGS_RELEASE@")


if(FFTWTYPE STREQUAL FFTWD)
  set(FFTW_CONFIGURE_EXTRA_ARG "")
elseif(FFTWTYPE STREQUAL FFTWF)
  set(FFTW_CONFIGURE_EXTRA_ARG --enable-float)
endif()

# Configure Step
message("[] Configuring ${FFTWTYPE}...")
execute_process(COMMAND sh @CMAKE_CURRENT_BINARY_DIR@/FFTW/configure --prefix=@CMAKE_CURRENT_BINARY_DIR@/FFTW-install --enable-static --enable-threads ${FFTW_CONFIGURE_EXTRA_ARG} WORKING_DIRECTORY @CMAKE_CURRENT_BINARY_DIR@/FFTW-build)

# Build Step
message("[] Building ${FFTWTYPE}...")
execute_process(COMMAND make WORKING_DIRECTORY @CMAKE_CURRENT_BINARY_DIR@/FFTW-build)

# Install Step
message("[] Installing ${FFTWTYPE}...")
execute_process(COMMAND make install WORKING_DIRECTORY @CMAKE_CURRENT_BINARY_DIR@/FFTW-build)
